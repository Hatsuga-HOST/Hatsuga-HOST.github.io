<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Luau Obfuscator – Ultimate v3</title>
<style>
:root {
  --bg:#080c14; --card:#121b29; --fg:#e8edf6;
  --accent:#7c5cff; --ok:#22c55e; --no:#ef4444;
}
body {margin:0; font-family:Inter,system-ui,sans-serif; background:var(--bg); color:var(--fg);}
.wrap {max-width:1000px; margin:30px auto; padding:0 16px;}
h1 {text-align:center; font-size:28px; margin-bottom:10px;}
h3 {margin-top:0;}
.card {background:var(--card); padding:18px; margin-top:18px;
  border-radius:14px; box-shadow:0 8px 28px rgba(0,0,0,.4);}
textarea {width:100%; height:280px; background:#0a0f18; color:var(--fg);
  border:1px solid #1f2937; border-radius:12px; padding:12px;
  font-family:monospace; font-size:13px; line-height:1.4;}
select,input,button {padding:10px 14px; border-radius:10px; border:none; font-weight:600; cursor:pointer;}
select,input {background:#0a0f18; color:var(--fg); border:1px solid #1f2937;}
.btn {background:#1f2937; color:#fff; margin-right:8px; transition:.2s;}
.btn:hover {transform:translateY(-2px);}
.btn.primary {background:linear-gradient(90deg,var(--accent),#4f46e5);}
.btn.good {background:linear-gradient(90deg,var(--ok),#059669);}
.progress {height:10px; background:#1f2937; border-radius:8px; overflow:hidden; margin:10px 0;}
.progress-bar {height:100%; background:var(--accent); width:0%; transition:.4s;}
.features {display:grid; grid-template-columns:repeat(2,1fr); gap:4px; margin-top:12px; font-size:13px;}
.check{color:var(--ok); margin-right:6px;} .cross{color:var(--no); margin-right:6px;}
.footer {font-size:12px; opacity:.7; margin-top:6px;}
</style>
</head>
<body>
<div class="wrap">
  <h1>Luau Obfuscator – Ultimate v3</h1>

  <div class="card">
    <h3>1) Source Code</h3>
    <textarea id="input" placeholder="-- Paste your Luau code here"></textarea>
    <div style="margin-top:10px">
      <button class="btn" id="uploadBtn">Upload .lua/.txt</button>
      <input type="file" id="fileInput" accept=".lua,.txt" style="display:none"/>
      <button class="btn" id="clearIn">Clear Input</button>
    </div>
  </div>

  <div class="card">
    <h3>2) Settings</h3>
    <label for="level">Select Level (1–10):</label>
    <select id="level"></select>
    <div class="progress"><div class="progress-bar" id="pbar"></div></div>

    <div style="margin-top:8px">
      <label>Optional Key:</label>
      <input type="text" id="key" placeholder="leave empty if none"/>
    </div>

    <button class="btn primary" id="run" style="margin-top:10px">Obfuscate</button>
    <div class="features" id="info">Choose a level to view features.</div>
  </div>

  <div class="card">
    <h3>3) Output</h3>
    <textarea id="output" readonly placeholder="-- Obfuscated output will appear here"></textarea>
    <div style="margin-top:10px">
      <button class="btn" id="copy">Copy</button>
      <button class="btn" id="clearOut">Clear Output</button>
      <button class="btn good" id="download">Download</button>
    </div>
    <div class="footer" id="stats">No output generated.</div>
  </div>
</div>

<script>
const $=id=>document.getElementById(id);

// --- auto populate levels ---
for(let i=1;i<=10;i++){ $("level").innerHTML+=`<option value="${i}">Level ${i}</option>`; }

// --- Core methods (simple demo) ---
function minify(src){ return src.replace(/--.*$/gm,'').replace(/\s+/g,' ').trim(); }
function renameVars(code,key=""){ return code.replace(/\b([a-zA-Z_]\w*)\b/g,m=>"__"+(key?key:"")+Math.random().toString(36).substr(2,5)); }
function encodeStrings(code,key=""){
  return code.replace(/"(.*?)"/g,(m,s)=>{
    let encoded=btoa(s.split('').map(c=>String.fromCharCode(c.charCodeAt(0)^(key?key.charCodeAt(0):42))).join(''));
    return `"${encoded}"`;
  });
}
function junk(code){ return `-- junk\nlocal _${Math.random().toString(36).substr(2,5)}=${Math.random()*99}\n`+code; }
function flatten(code){ return `do local _f=${Math.floor(Math.random()*9999)}; if _f%2==0 then ${code} end end`; }
function multiWrap(code,n=2){ let out=code; for(let i=0;i<n;i++) out=`loadstring([[${btoa(out)}]])()`; return out; }
function antiTamper(code){ return `if _G.__tamper then error("Tamper!") end; _G.__tamper=true; ${code}`; }

// --- Obfuscator logic ---
function obfuscate(code,lvl,key=""){
  let out=code;
  if(lvl>=1) out=minify(out);
  if(lvl>=2) out=renameVars(out,key);
  if(lvl>=3) out=encodeStrings(out,key);
  if(lvl>=4) out=junk(out);
  if(lvl>=5) out=flatten(out);
  if(lvl>=6) out=junk(out); // more junk
  if(lvl>=7) out=multiWrap(out,2);
  if(lvl>=8) out=antiTamper(out);
  if(lvl>=9) out=multiWrap(out,3);
  if(lvl>=10) out=junk(out+flatten(out)); // crazy mix
  return out;
}

function randomFileName(lvl){
  return `LUOBF-Lv${lvl}-`+Math.random().toString(36).substr(2,6)+".lua";
}

// --- Features ---
const feats=["Minify","Rename Vars","Encode Strings","Junk Code","Flatten Flow","Extra Junk","Multi-Wrap","Anti-Tamper","Heavy Wrap","Mix Junk+Flatten"];
function renderFeatures(lvl){
  $("pbar").style.width=(lvl*10)+"%";
  $("info").innerHTML=feats.map((f,i)=>`<div>${i<lvl?'<span class="check">✅</span>':'<span class="cross">❌</span>'}${f}</div>`).join("");
}

// --- Events ---
$("level").addEventListener("change",()=>renderFeatures(parseInt($("level").value)));
$("run").addEventListener("click",()=>{
  let src=$("input").value;if(!src.trim()){alert("Paste code first!");return;}
  let lvl=parseInt($("level").value), key=$("key").value;
  let out=obfuscate(src,lvl,key); $("output").value=out;
  let lines=out.split("\n").length, size=(out.length/1024).toFixed(2);
  $("stats").innerText=`Lines: ${lines} | Size: ${size} KB`;
});
$("copy").addEventListener("click",async()=>{
  let v=$("output").value;if(!v){alert("Nothing to copy");return}
  await navigator.clipboard.writeText(v);alert("Copied!");
});
$("download").addEventListener("click",()=>{
  let v=$("output").value;if(!v){alert("Nothing to download");return}
  const lvl=parseInt($("level").value);
  const blob=new Blob([v],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=randomFileName(lvl);
  a.click(); URL.revokeObjectURL(a.href);
});
$("clearIn").addEventListener("click",()=>{$("input").value="";});
$("clearOut").addEventListener("click",()=>{$("output").value="";$("stats").innerText="No output generated.";});
$("uploadBtn").addEventListener("click",()=>{$("fileInput").click();});
$("fileInput").addEventListener("change",e=>{
  const file=e.target.files[0]; if(!file) return;
  const reader=new FileReader();
  reader.onload=()=>{$("input").value=reader.result;};
  reader.readAsText(file);
});
</script>
</body>
</html>
