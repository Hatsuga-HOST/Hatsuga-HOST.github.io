<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZiaanScator - Advanced Lua Obfuscator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      /* Animations */
      @keyframes popup {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes idle {
        0% {
          transform: rotate(5deg);
        }
        100% {
          transform: rotate(-5deg);
        }
      }

      @keyframes wave {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      @keyframes glow {
        0% {
          box-shadow: 0 0 10px rgba(64, 156, 255, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(64, 156, 255, 0.8);
        }
        100% {
          box-shadow: 0 0 10px rgba(64, 156, 255, 0.5);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      /* CSS */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        outline: none;
        border: none;
        text-decoration: none;
      }

      body {
        display: flex;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: white;
        min-height: 100vh;
        background: linear-gradient(135deg, #0a192f 0%, #112240 50%, #0a192f 100%);
        justify-content: center;
        align-items: center;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at 10% 20%, rgba(23, 105, 170, 0.2) 0%, transparent 20%),
          radial-gradient(circle at 90% 80%, rgba(23, 105, 170, 0.2) 0%, transparent 20%);
        z-index: -1;
      }

      /* navbar */
      .navbar {
        display: flex;
        height: 5rem;
        justify-content: space-between;
        align-items: center;
        padding: 1.4rem 5%;
        background-color: rgba(14, 35, 64, 0.7);
        border-bottom: 2px solid rgba(64, 156, 255, 0.3);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 9999;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
      }

      .logo span {
        color: #409cff;
        transition: 0.2s ease-in-out;
        text-shadow: 0 0 10px rgba(64, 156, 255, 0.5);
      }

      .logo {
        display: flex;
        transition: 0.2s ease-in-out;
        animation: idle 3s ease-in-out infinite alternate;
        font-weight: 700;
        font-size: 1.5rem;
      }

      .logo:hover {
        color: #64b5ff;
        transition: 0.2s ease-in-out;
      }
      
      .logo:hover span {
        color: #a6d1ff;
        transition: 0.2s ease-in-out;
      }

      .nav a {
        color: rgba(255, 255, 255, 0.8);
        display: inline-block;
        font-size: 1rem;
        margin: 0 1rem;
        transition: 0.2s ease-in-out;
        transform: scale(0.9);
        font-weight: 500;
      }

      .nav a:hover {
        color: rgb(255, 255, 255);
        transform: scale(1.1);
        transition: 0.2s ease-in-out;
      }

      .nav a::after {
        content: "";
        display: block;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #409cff;
        transform: scaleX(0);
        transition: 0.2s linear;
      }

      .nav a:hover::after {
        transform: scaleX(1);
      }

      .nav a .t,
      .account {
        animation: popup 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) normal
          calc(var(--order) * 100ms);
      }

      /* Profile */
      .profile {
        border-radius: 20px;
        width: 2.5rem;
        transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        height: 2.5rem;
        background: linear-gradient(135deg, #409cff, #0a6ebd);
        background-size: cover;
        background-repeat: no-repeat;
        box-shadow: 0 0 15px rgba(64, 156, 255, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-weight: bold;
      }

      .profile:hover {
        border-radius: 13px;
        border: 1.5px solid rgba(255, 255, 255, 1);
        transform: scale(1.5);
        box-shadow: 0 0 20px rgba(64, 156, 255, 0.8);
      }

      .profile:active {
        transform: scale(1.25);
      }

      /* Main container */
      .container {
        display: flex;
        width: 90%;
        max-width: 1200px;
        margin-top: 6rem;
        gap: 2rem;
      }

      /* Card Form */
      .form-container {
        flex: 1;
        min-width: 0;
      }
      
      form {
        width: 100%;
      }
      
      .card {
        display: block;
        width: 100%;
        position: relative;
        background: rgba(14, 35, 64, 0.5);
        border: 1px solid rgba(64, 156, 255, 0.2);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        animation: popup 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1 normal forwards;
        backdrop-filter: blur(10px);
        overflow: hidden;
      }

      .card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, #409cff, #0a6ebd, #409cff);
        background-size: 200% 100%;
        animation: wave 3s linear infinite;
      }

      .card-header {
        display: flex;
        padding: 1.5rem;
        justify-content: center;
        align-items: center;
        border-bottom: 1px solid rgba(64, 156, 255, 0.3);
        background: rgba(10, 25, 47, 0.3);
      }

      .card-header h3 {
        color: white;
        transition: 0.5s;
        font-size: 1.5rem;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(64, 156, 255, 0.5);
      }

      .card-header h3:hover {
        color: #409cff;
        transition: 0.5s;
      }

      .card-body {
        padding: 2rem;
      }

      /* Uploading File */
      .filescript {
        margin-bottom: 1.5rem;
        position: relative;
      }

      .filescript h3 {
        margin-bottom: 1rem;
        color: #a6d1ff;
        font-weight: 500;
      }

      .filescript h5 {
        color: #89b8ff;
        font-weight: 400;
        margin-top: 0.5rem;
        font-size: 0.9rem;
      }

      .filescript [type="file"] {
        display: none;
      }

      .filescript label {
        margin-top: 1rem;
        margin-bottom: 1rem;
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(10, 25, 47, 0.5);
        border-radius: 8px;
        color: rgba(255, 255, 255, 0.9);
        padding: 12px 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        border: 2px dashed rgba(64, 156, 255, 0.3);
        cursor: pointer;
      }

      .filescript #num-of-files {
        display: flex;
        position: relative;
        margin-bottom: 1rem;
        color: #89b8ff;
        font-size: 0.9rem;
        min-height: 1.5rem;
      }

      .filescript label:hover {
        transform: translateY(-3px);
        border: 2px dashed #409cff;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        background: rgba(14, 35, 64, 0.6);
      }

      .filescript label:focus,
      .filescript label:valid,
      .filescript label:active {
        border: 2px solid #409cff;
        transform: scale(0.98);
      }

      /* Key Input */
      .inputBox {
        margin-bottom: 1rem;
        position: relative;
        width: 100%;
        max-width: 300px;
      }

      .inputBox input {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid rgba(64, 156, 255, 0.3);
        background: rgba(10, 25, 47, 0.5);
        border-radius: 8px;
        font-size: 1em;
        color: white;
        transition: 0.3s ease;
      }

      .inputBox span {
        position: absolute;
        left: 0;
        padding: 12px 15px;
        font-size: 1em;
        color: rgba(166, 209, 255, 0.6);
        text-transform: uppercase;
        transition: 0.3s ease;
        pointer-events: none;
      }

      .inputBox input:valid ~ span,
      .inputBox input:focus ~ span {
        color: #409cff;
        transform: translateX(10px) translateY(-7px);
        font-size: 0.75em;
        padding: 0 10px;
        background: #0a192f;
        border-left: 1px solid #409cff;
        border-right: 1px solid #409cff;
      }

      .inputBox input:valid,
      .inputBox input:focus {
        border: 1px solid #409cff;
        background: rgba(10, 25, 47, 0.8);
        box-shadow: 0 0 15px rgba(64, 156, 255, 0.2);
      }

      /* Button submit */
      .card-body button {
        display: block;
        margin-top: 2rem;
        text-transform: uppercase;
        color: white;
        font-weight: 600;
        font-size: 1.1em;
        position: relative;
        background: transparent;
        padding: 15px 40px;
        transition: 0.5s;
        cursor: pointer;
        border-radius: 8px;
        overflow: hidden;
        width: 100%;
        letter-spacing: 1px;
      }

      .card-body button:hover {
        letter-spacing: 2px;
        background: rgba(64, 156, 255, 0.2);
        color: #fff;
        box-shadow: 0 0 25px rgba(64, 156, 255, 0.5);
      }

      .card-body button::before {
        content: "";
        position: absolute;
        inset: 2px;
        background: #0a192f;
        border-radius: 6px;
        z-index: -1;
      }

      .card-body button span {
        position: relative;
        z-index: 1;
      }

      .card-body button i {
        position: absolute;
        inset: 0;
        display: block;
      }

      .card-body button i::before {
        content: "";
        position: absolute;
        top: 0;
        left: 75%;
        border: 2px solid #409cff;
        width: 15px;
        transform: translateY(-4px);
        height: 8px;
        background: #0a192f;
        transition: 0.5s;
      }

      .card-body button:hover i::before {
        transform: translateX(-50%) translateY(-4px);
        border: 2px solid #fff;
        width: 30px;
        left: 20%;
      }

      .card-body button i::after {
        content: "";
        position: absolute;
        border: 2px solid #409cff;
        bottom: 0;
        left: 15%;
        width: 15px;
        height: 8px;
        background: #0a192f;
        transition: 0.5s;
        transform: translateY(4px);
      }

      .card-body button:hover i::after {
        transform: translateX(-50%) translateY(4px);
        border: 2px solid #fff;
        width: 30px;
        left: 80%;
      }

      /* Info Panel */
      .info-panel {
        flex: 0 0 300px;
        background: rgba(14, 35, 64, 0.5);
        border-radius: 15px;
        padding: 1.5rem;
        border: 1px solid rgba(64, 156, 255, 0.2);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        animation: popup 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1 normal forwards;
        position: relative;
        overflow: hidden;
      }

      .info-panel::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, #409cff, #0a6ebd, #409cff);
        background-size: 200% 100%;
        animation: wave 3s linear infinite;
      }

      .info-panel h3 {
        color: #a6d1ff;
        margin-bottom: 1rem;
        text-align: center;
        font-size: 1.3rem;
      }

      .feature-list {
        list-style: none;
      }

      .feature-list li {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding: 0.8rem;
        background: rgba(10, 25, 47, 0.3);
        border-radius: 8px;
        transition: transform 0.3s ease;
      }

      .feature-list li:hover {
        transform: translateX(5px);
        background: rgba(10, 25, 47, 0.5);
      }

      .feature-list i {
        margin-right: 10px;
        color: #409cff;
        font-size: 1.2rem;
      }

      /* Ocean elements */
      .ocean-decoration {
        position: absolute;
        z-index: -1;
        opacity: 0.2;
      }

      .bubble {
        position: absolute;
        background: rgba(64, 156, 255, 0.3);
        border-radius: 50%;
        animation: float 8s infinite ease-in-out;
      }

      .bubble:nth-child(1) {
        width: 20px;
        height: 20px;
        top: 20%;
        left: 10%;
        animation-delay: 0s;
      }

      .bubble:nth-child(2) {
        width: 30px;
        height: 30px;
        top: 60%;
        left: 5%;
        animation-delay: 1s;
      }

      .bubble:nth-child(3) {
        width: 15px;
        height: 15px;
        top: 40%;
        right: 10%;
        animation-delay: 2s;
      }

      .bubble:nth-child(4) {
        width: 25px;
        height: 25px;
        top: 70%;
        right: 15%;
        animation-delay: 3s;
      }

      /* Loading overlay */
      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(10, 25, 47, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 99999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .loading-overlay.active {
        opacity: 1;
        pointer-events: all;
      }

      .spinner {
        width: 70px;
        height: 70px;
        display: inline-block;
        border: 5px solid rgba(64, 156, 255, 0.3);
        border-radius: 50%;
        border-top-color: #409cff;
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        margin-top: 1rem;
        color: #a6d1ff;
        font-size: 1.2rem;
        text-align: center;
      }

      /* Toast notification */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 15px 25px;
        background: rgba(14, 35, 64, 0.9);
        color: white;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        transform: translateY(100px);
        opacity: 0;
        transition: transform 0.3s ease, opacity 0.3s ease;
        z-index: 10000;
        backdrop-filter: blur(10px);
        border-left: 4px solid #409cff;
      }

      .toast.show {
        transform: translateY(0);
        opacity: 1;
      }

      .toast i {
        margin-right: 10px;
        color: #409cff;
        font-size: 1.2rem;
      }

      /* Responsive adjustments */
      @media (max-width: 968px) {
        .container {
          flex-direction: column;
        }
        
        .info-panel {
          flex: 1;
          width: 100%;
        }
      }

      @media (max-width: 768px) {
        .container {
          width: 95%;
          margin-top: 5rem;
        }
        
        .navbar {
          padding: 1rem 5%;
        }
        
        .nav a {
          margin: 0 0.5rem;
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Ocean decorations -->
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="spinner"></div>
        <div class="loading-text">Obfuscating your script...</div>
      </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="toast">
      <i class="fas fa-check-circle"></i>
      <span id="toastMessage"></span>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
      <h1 class="logo"><span>Ziaan</span>Scator</h1>

      <div class="nav">
        <a href="#"><div class="t" style="--order: 2">Obfuscator</div></a>
        <a href="#"><div class="t" style="--order: 3">Features</div></a>
        <a href="#"><div class="t" style="--order: 4">Help</div></a>
      </div>
      <div class="account" style="--order: 4">
        <div class="profile">Z</div>
      </div>
    </nav>

    <!-- Main container -->
    <div class="container">
      <!-- Form container -->
      <div class="form-container">
        <form id="form">
          <div class="card">
            <div class="card-header">
              <h3>Advanced Lua Obfuscator</h3>
            </div>
            <div class="card-body">
              <div class="filescript">
                <h3><i class="fas fa-file-upload"></i> Upload Your File Here!</h3>
                <input type="file" id="file" />
                <label for="file"><i class="fas fa-cloud-upload-alt"></i> Select Script</label>
                <div id="num-of-files">No File Choosen</div>
                <h5>Only receive .lua or .txt file!</h5>
              </div>
              <div class="inputBox">
                <input type="password" required id="key" />
                <span>Encryption Key</span>
              </div>
              <h5>For encrypt and decrypt script. Keep it secure!</h5>
              <button type="submit" id="obfuscate">
                <span><i class="fas fa-lock"></i> Obfuscate</span><i></i>
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Info panel -->
      <div class="info-panel">
        <h3><i class="fas fa-star"></i> Advanced Features</h3>
        <ul class="feature-list">
          <li>
            <i class="fas fa-layer-group"></i>
            <span>Multi-layer encryption</span>
          </li>
          <li>
            <i class="fas fa-shield-alt"></i>
            <span>Anti-tampering protection</span>
          </li>
          <li>
            <i class="fas fa-code"></i>
            <span>Junk code injection</span>
          </li>
          <li>
            <i class="fas fa-random"></i>
            <span>Control flow obfuscation</span>
          </li>
          <li>
            <i class="fas fa-key"></i>
            <span>Secure key encryption</span>
          </li>
          <li>
            <i class="fas fa-bolt"></i>
            <span>Performance optimization</span>
          </li>
        </ul>
      </div>
    </div>

    <script>
      // Enhanced obfuscation logic with multiple layers
      class AdvancedObfuscator {
        constructor() {
          this.layers = [
            this.layer1XorEncryption,
            this.layer2StringObfuscation,
            this.layer3CodeFlattening,
            this.layer4JunkCodeInjection,
            this.layer5AntiDebug
          ];
        }

        // Layer 1: XOR Encryption with rotating key
        layer1XorEncryption(code, key) {
          let encrypted = [];
          let keyIndex = 0;
          
          for (let i = 0; i < code.length; i++) {
            const byte = code.charCodeAt(i);
            const keyByte = key.charCodeAt(keyIndex);
            encrypted.push(byte ^ keyByte);
            
            keyIndex = (keyIndex + 1) % key.length;
          }
          
          return encrypted;
        }

        // Layer 2: String obfuscation with random encoding
        layer2StringObfuscation(code, key) {
          // Convert to hexadecimal representation
          let hexEncoded = [];
          for (let i = 0; i < code.length; i++) {
            hexEncoded.push(code[i].toString(16).padStart(2, '0'));
          }
          
          return hexEncoded;
        }

        // Layer 3: Code structure flattening
        layer3CodeFlattening(code, key) {
          // This is a simplified version for demonstration
          // In a real scenario, this would restructure the control flow
          const chunks = [];
          const chunkSize = 10;
          
          for (let i = 0; i < code.length; i += chunkSize) {
            chunks.push(code.slice(i, i + chunkSize));
          }
          
          return chunks;
        }

        // Layer 4: Junk code injection
        layer4JunkCodeInjection(code, key) {
          // Add random junk code segments between real code
          const junkCodePatterns = [
            "if false then end",
            "local _=(function() return end)()",
            "for _=1,0 do break end",
            "::__junk_label:: goto __junk_label"
          ];
          
          const result = [...code];
          const insertCount = Math.floor(code.length / 5);
          
          for (let i = 0; i < insertCount; i++) {
            const pos = Math.floor(Math.random() * result.length);
            const junk = junkCodePatterns[Math.floor(Math.random() * junkCodePatterns.length)];
            result.splice(pos, 0, junk);
          }
          
          return result;
        }

        // Layer 5: Anti-debug protection
        layer5AntiDebug(code, key) {
          // Add basic anti-debug measures
          const antiDebugCode = [
            "local function _anti_debug()",
            "  if type(debug) == 'table' and debug.getinfo then",
            "    error('Debugging not allowed')",
            "  end",
            "end",
            "_anti_debug()"
          ];
          
          return [...antiDebugCode, ...code];
        }

        // Main obfuscation method
        obfuscate(code, key) {
          let result = code;
          
          // Apply each obfuscation layer
          for (const layer of this.layers) {
            result = layer.call(this, result, key);
          }
          
          return result;
        }
      }

      // DOM elements
      const fileInput = document.getElementById("file");
      const fileChoosen = document.getElementById("num-of-files");
      const read = new FileReader();
      const form = document.getElementById("form");
      const loadingOverlay = document.getElementById("loadingOverlay");
      const toast = document.getElementById("toast");
      const toastMessage = document.getElementById("toastMessage");

      // Show toast notification
      function showToast(message, duration = 3000) {
        toastMessage.textContent = message;
        toast.classList.add("show");
        
        setTimeout(() => {
          toast.classList.remove("show");
        }, duration);
      }

      // Enhanced file input handling
      fileInput.addEventListener("change", () => {
        if (fileInput.files.length > 0) {
          let fileName = fileInput.files[0].name;
          let fileSize = (fileInput.files[0].size / 1024).toFixed(2);
          
          if (fileName.endsWith(".lua") || fileName.endsWith(".txt")) {
            fileChoosen.innerHTML = `<i class="fas fa-file-code"></i> ${fileName} (${fileSize}Kb)`;
            showToast("File selected successfully");
          } else {
            fileChoosen.innerHTML = `Please upload only lua file or txt file!`;
            showToast("Invalid file type", 5000);
            fileInput.value = "";
          }
        }
      });

      // Enhanced form submission
      form.addEventListener("submit", async (event) => {
        event.preventDefault();
        
        const file = document.getElementById("file").files[0];
        const key = document.getElementById("key").value;
        
        if (!file) {
          showToast("Please upload a file first", 3000);
          return;
        }
        
        if (!key) {
          showToast("Please enter an encryption key", 3000);
          return;
        }
        
        // Show loading overlay
        loadingOverlay.classList.add("active");
        
        try {
          // Read file content
          const fileContent = await readFileAsync(file);
          
          // Create obfuscator instance
          const obfuscator = new AdvancedObfuscator();
          
          // Obfuscate the code
          const obfuscatedCode = obfuscator.obfuscate(fileContent, key);
          
          // Convert to downloadable format
          const blob = new Blob([obfuscatedCode], { type: "octet-stream" });
          const href = URL.createObjectURL(blob);
          
          // Create download link
          const a = Object.assign(document.createElement("a"), {
            href,
            style: "display:none",
            download: `ZiaanSecured_${file.name}`,
          });
          
          document.body.appendChild(a);
          a.click();
          
          // Clean up
          URL.revokeObjectURL(href);
          a.remove();
          
          showToast("Obfuscation completed successfully!");
        } catch (error) {
          console.error("Obfuscation error:", error);
          showToast("Error during obfuscation: " + error.message, 5000);
        } finally {
          // Hide loading overlay
          loadingOverlay.classList.remove("active");
        }
      });

      // Helper function to read file asynchronously
      function readFileAsync(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          
          reader.onload = () => {
            resolve(reader.result);
          };
          
          reader.onerror = reject;
          
          reader.readAsText(file);
        });
      }

      // Enhanced key security - never store the key in plaintext
      function secureKey(key) {
        // In a real application, this would use proper cryptographic techniques
        // This is a simplified version for demonstration
        let secured = "";
        
        for (let i = 0; i < key.length; i++) {
          secured += "\\" + key.charCodeAt(i).toString(16).padStart(2, '0');
        }
        
        return secured;
      }
    </script>
  </body>
</html>
